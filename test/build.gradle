task cleanUp(type: Exec) {
  commandLine "./full-cleanup"
}

task testScale(type: Exec) {
  commandLine "./test-scale", project.scaleDc, project.scaleFrom, project.scaleTo
}

task testBasic(type: Exec) {
  commandLine "./test-basic", project.basicDc, project.basicReplicas
}

task testBackup(type: Exec) {
  commandLine "./test-backup", project.backupDc, project.backupReplicas
}

task setupAks(type: Exec) {
  commandLine "./setup-aks"
}

task test {
  dependsOn 'testBasic'
  dependsOn 'testScale'
  dependsOn 'testBackup'
}

task basicSetup(type: Exec) {
  commandLine "./basic-setup", project.basicSetupDc, project.basicSetupReplicas
}

tasks.withType(Exec) {
  environment << [IMAGE_SUFFIX: project.dockerImageSuffix, IMAGE_PREFIX: project.dockerImagePrefix, REGISTRY: project.registryUrl]
}

